GAS LISTING /tmp/ccRNnKHa.s 			page 1


   1               		.file	"comp.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.stabs	"/home/alina/ca/magn/",100,0,2,.Ltext0
   9               		.stabs	"comp.c",100,0,2,.Ltext0
  10               		.text
  11               	.Ltext0:
  12               		.stabs	"gcc2_compiled.",60,0,0,0
  13               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,1,0
  14               		.stabs	"char:t(0,2)=r(0,2);0;127;",128,0,1,0
  15               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,1,0
  16               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,1,0
  17               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,1,0
  18               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,1,
  19               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,1,0
  20               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,1,0
  21               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,1,0
  22               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,1,0
  23               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,1,0
  24               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,1,0
  25               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,1,0
  26               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,1,0
  27               		.stabs	"void:t(0,15)=(0,15)",128,0,1,0
  28               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/avr/io.h",130,0,0,0
  29               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  30               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/inttypes.h",130,0,0,0
  31               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/stdint.h",130,0,0,0
  32               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  33               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  34               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  35               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  36               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  37               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  38               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  39               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  40               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  41               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  42               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  43               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  44               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  45               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  46               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  47               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  48               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  49               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  50               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  51               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  52               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  53               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  54               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  55               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
  56               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  57               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
GAS LISTING /tmp/ccRNnKHa.s 			page 2


  58               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  59               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  60               		.stabn	162,0,0,0
  61               		.stabs	"int_farptr_t:t(3,1)=(4,5)",128,0,77,0
  62               		.stabs	"uint_farptr_t:t(3,2)=(4,6)",128,0,81,0
  63               		.stabn	162,0,0,0
  64               		.stabn	162,0,0,0
  65               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/avr/fuse.h",130,0,0,0
  66               		.stabs	"__fuse_t:t(5,1)=(5,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
  67               		.stabn	162,0,0,0
  68               		.stabn	162,0,0,0
  69               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/stdio.h",130,0,0,0
  70               		.stabs	"/usr/lib/gcc/avr/4.3.5/include/stdarg.h",130,0,0,0
  71               		.stabs	"__gnuc_va_list:t(7,1)=(7,2)=*(0,15)",128,0,43,0
  72               		.stabs	"va_list:t(7,3)=(7,1)",128,0,105,0
  73               		.stabn	162,0,0,0
  74               		.stabs	"/usr/lib/gcc/avr/4.3.5/include/stddef.h",130,0,0,0
  75               		.stabs	"size_t:t(8,1)=(0,4)",128,0,214,0
  76               		.stabn	162,0,0,0
  77               		.stabs	"__file:T(6,1)=s14buf:(6,2)=*(0,2),0,16;unget:(0,11),16,8;flags:(4,2),24,8;size:(0,1),32,16
  78               		.stabn	162,0,0,0
  79               		.stabs	"/home/alina/ca/magn/Make-dir/libarduino.h",130,0,0,0
  80               		.stabs	"pinmode:T(9,1)=eINPUT:0,OUTPUT:1,;",128,0,0,0
  81               		.stabs	"pinstate:T(9,2)=eLOW:0,HIGH:1,;",128,0,0,0
  82               		.stabn	162,0,0,0
  83               		.stabs	"/home/alina/ca/magn/Make-dir/WProgram.h",130,0,0,0
  84               		.stabs	"/usr/lib/gcc/avr/4.3.5/../../../avr/include/stdlib.h",130,0,0,0
  85               		.stabs	"/usr/lib/gcc/avr/4.3.5/include/stddef.h",130,0,0,0
  86               		.stabs	"wchar_t:t(12,1)=(0,1)",128,0,326,0
  87               		.stabn	162,0,0,0
  88               		.stabs	"div_t:t(11,1)=(11,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
  89               		.stabs	"ldiv_t:t(11,3)=(11,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
  90               		.stabs	"__compar_fn_t:t(11,5)=(11,6)=*(11,7)=f(0,1)",128,0,80,0
  91               		.stabn	162,0,0,0
  92               		.stabs	"/home/alina/ca/magn/Make-dir/wiring.h",130,0,0,0
  93               		.stabs	"word:t(13,1)=(0,4)",128,0,93,0
  94               		.stabs	"boolean:t(13,2)=(4,2)",128,0,97,0
  95               		.stabs	"byte:t(13,3)=(4,2)",128,0,98,0
  96               		.stabn	162,0,0,0
  97               		.stabn	162,0,0,0
  98               		.section	.text.sendStart,"ax",@progbits
  99               		.stabs	"sendStart:F(0,15)",36,0,51,sendStart
 100               	.global	sendStart
 101               		.type	sendStart, @function
 102               	sendStart:
 103               		.stabd	46,0,0
   1:comp.c        **** #include <avr/io.h>
   2:comp.c        **** #include <stdio.h>
   3:comp.c        **** #include <util/delay.h>
   4:comp.c        **** #include <avr/interrupt.h>
   5:comp.c        **** #include <libarduino.h>
   6:comp.c        **** #include <WProgram.h>
   7:comp.c        **** 
   8:comp.c        **** #include "comp.h"
   9:comp.c        **** 
  10:comp.c        **** int main(void){
  11:comp.c        **** 	init();
GAS LISTING /tmp/ccRNnKHa.s 			page 3


  12:comp.c        **** 	in();
  13:comp.c        **** 	sei();
  14:comp.c        **** 	while(1) {
  15:comp.c        **** 		int x,y,z;
  16:comp.c        **** 		getValues(&x,&y,&z);	
  17:comp.c        **** 		printf("X= %d\tY= %d\tZ= %d\n", x, y, z);
  18:comp.c        **** 		delay(1000);
  19:comp.c        **** 	}
  20:comp.c        **** 	return 1;
  21:comp.c        **** }
  22:comp.c        **** 
  23:comp.c        **** void in(void){
  24:comp.c        **** 	PORTC = 0b00110000;
  25:comp.c        **** 	// Formula from 21.5.2 in ATmega168 datasheet.
  26:comp.c        **** 	TWSR &= ~((1<<TWPS1)&(1<<TWPS0));
  27:comp.c        **** 	TWBR = (unsigned char)(F_CPU/200000l-8);
  28:comp.c        **** 	// Put the HMC5843 into continuous mode
  29:comp.c        **** 	sendStart();
  30:comp.c        **** 	sendByte(0x3C);
  31:comp.c        **** 	sendByte(0x02);
  32:comp.c        **** 	sendByte(0x00);
  33:comp.c        **** 	sendStop();
  34:comp.c        **** 	delay(100);
  35:comp.c        **** }
  36:comp.c        **** 
  37:comp.c        **** void getValues(int *x, int *y, int *z) {
  38:comp.c        **** 	unsigned char xin, yin, zin;
  39:comp.c        **** 	sendStart();
  40:comp.c        **** 	sendByte(0x3D);
  41:comp.c        **** 	xin = receiveByte();
  42:comp.c        **** 	*x = (xin<<8)|receiveByte();
  43:comp.c        **** 	yin = receiveByte();
  44:comp.c        **** 	*y = (yin<<8)|receiveByte();
  45:comp.c        **** 	zin = receiveByte();
  46:comp.c        **** 	*z = (zin<<8)|receiveByte();
  47:comp.c        **** 	sendByte(0x3D);
  48:comp.c        **** 	sendStop();
  49:comp.c        **** }
  50:comp.c        **** 
  51:comp.c        **** void sendStart(void) {
 104               		.stabn	68,0,51,.LM0-.LFBB1
 105               	.LM0:
 106               	.LFBB1:
 107               	/* prologue: function */
 108               	/* frame size = 0 */
  52:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWSTA)|(1<<TWEN);
 109               		.stabn	68,0,52,.LM1-.LFBB1
 110               	.LM1:
 111 0000 84EA      		ldi r24,lo8(-92)
 112 0002 8093 BC00 		sts 188,r24
 113               	/* epilogue start */
  53:comp.c        **** }
 114               		.stabn	68,0,53,.LM2-.LFBB1
 115               	.LM2:
 116 0006 0895      		ret
 117               		.size	sendStart, .-sendStart
 118               	.Lscope1:
GAS LISTING /tmp/ccRNnKHa.s 			page 4


 119               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 120               		.stabd	78,0,0
 121               		.section	.text.sendStop,"ax",@progbits
 122               		.stabs	"sendStop:F(0,15)",36,0,55,sendStop
 123               	.global	sendStop
 124               		.type	sendStop, @function
 125               	sendStop:
 126               		.stabd	46,0,0
  54:comp.c        **** 
  55:comp.c        **** void sendStop(void) {
 127               		.stabn	68,0,55,.LM3-.LFBB2
 128               	.LM3:
 129               	.LFBB2:
 130               	/* prologue: function */
 131               	/* frame size = 0 */
 132               		.stabn	68,0,55,.LM4-.LFBB2
 133               	.LM4:
 134 0000 28EC      		ldi r18,lo8(200)
 135 0002 30E0      		ldi r19,hi8(200)
 136               	.L5:
 137               	.LBB16:
 138               	.LBB17:
  56:comp.c        **** 	waitForReady();
  57:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWSTO);
  58:comp.c        **** }
  59:comp.c        **** 
  60:comp.c        **** void sendByte(unsigned char data) {
  61:comp.c        **** 	waitForReady();
  62:comp.c        **** 	TWDR = data;
  63:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWEN);
  64:comp.c        **** }
  65:comp.c        **** 
  66:comp.c        **** unsigned char receiveByte(void) {
  67:comp.c        **** 	waitForReady();
  68:comp.c        **** 	TWCR = ((TWCR&0x0F)|(1<<TWINT)|(1<<TWEA));
  69:comp.c        **** 	waitForReady();
  70:comp.c        **** 	return(TWDR);
  71:comp.c        **** }
  72:comp.c        **** 
  73:comp.c        **** unsigned char readStatus() {
  74:comp.c        **** 	waitForReady();
  75:comp.c        **** 	return(TWSR);
  76:comp.c        **** }
  77:comp.c        **** 
  78:comp.c        **** void waitForReady(void) {
  79:comp.c        **** 	int timeout = 200;
  80:comp.c        **** 	while ((!(TWCR & (1<<TWINT))) && (timeout--));
 139               		.stabn	68,0,80,.LM5-.LFBB2
 140               	.LM5:
 141 0004 8091 BC00 		lds r24,188
 142 0008 87FD      		sbrc r24,7
 143 000a 00C0      		rjmp .L4
 144 000c 2115      		cp r18,__zero_reg__
 145 000e 3105      		cpc r19,__zero_reg__
 146 0010 01F0      		breq .L4
 147 0012 2150      		subi r18,lo8(-(-1))
 148 0014 3040      		sbci r19,hi8(-(-1))
GAS LISTING /tmp/ccRNnKHa.s 			page 5


 149 0016 00C0      		rjmp .L5
 150               	.L4:
 151               	.LBE17:
 152               	.LBE16:
  57:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWSTO);
 153               		.stabn	68,0,57,.LM6-.LFBB2
 154               	.LM6:
 155 0018 84E9      		ldi r24,lo8(-108)
 156 001a 8093 BC00 		sts 188,r24
 157               	/* epilogue start */
  58:comp.c        **** }
 158               		.stabn	68,0,58,.LM7-.LFBB2
 159               	.LM7:
 160 001e 0895      		ret
 161               		.size	sendStop, .-sendStop
 162               		.stabs	"timeout:r(0,1)",64,0,79,18
 163               		.stabn	192,0,0,.LBB17-.LFBB2
 164               		.stabn	224,0,0,.LBE17-.LFBB2
 165               	.Lscope2:
 166               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 167               		.stabd	78,0,0
 168               		.section	.text.sendByte,"ax",@progbits
 169               		.stabs	"sendByte:F(0,15)",36,0,60,sendByte
 170               		.stabs	"data:P(0,11)",64,0,60,25
 171               	.global	sendByte
 172               		.type	sendByte, @function
 173               	sendByte:
 174               		.stabd	46,0,0
  60:comp.c        **** void sendByte(unsigned char data) {
 175               		.stabn	68,0,60,.LM8-.LFBB3
 176               	.LM8:
 177               	.LFBB3:
 178               	/* prologue: function */
 179               	/* frame size = 0 */
 180 0000 982F      		mov r25,r24
  60:comp.c        **** void sendByte(unsigned char data) {
 181               		.stabn	68,0,60,.LM9-.LFBB3
 182               	.LM9:
 183 0002 28EC      		ldi r18,lo8(200)
 184 0004 30E0      		ldi r19,hi8(200)
 185               	.L9:
 186               	.LBB18:
 187               	.LBB19:
 188               		.stabn	68,0,80,.LM10-.LFBB3
 189               	.LM10:
 190 0006 8091 BC00 		lds r24,188
 191 000a 87FD      		sbrc r24,7
 192 000c 00C0      		rjmp .L8
 193 000e 2115      		cp r18,__zero_reg__
 194 0010 3105      		cpc r19,__zero_reg__
 195 0012 01F0      		breq .L8
 196 0014 2150      		subi r18,lo8(-(-1))
 197 0016 3040      		sbci r19,hi8(-(-1))
 198 0018 00C0      		rjmp .L9
 199               	.L8:
 200               	.LBE19:
 201               	.LBE18:
GAS LISTING /tmp/ccRNnKHa.s 			page 6


  62:comp.c        **** 	TWDR = data;
 202               		.stabn	68,0,62,.LM11-.LFBB3
 203               	.LM11:
 204 001a 9093 BB00 		sts 187,r25
  63:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWEN);
 205               		.stabn	68,0,63,.LM12-.LFBB3
 206               	.LM12:
 207 001e 84E8      		ldi r24,lo8(-124)
 208 0020 8093 BC00 		sts 188,r24
 209               	/* epilogue start */
  64:comp.c        **** }
 210               		.stabn	68,0,64,.LM13-.LFBB3
 211               	.LM13:
 212 0024 0895      		ret
 213               		.size	sendByte, .-sendByte
 214               		.stabs	"timeout:r(0,1)",64,0,79,18
 215               		.stabn	192,0,0,.LBB19-.LFBB3
 216               		.stabn	224,0,0,.LBE19-.LFBB3
 217               	.Lscope3:
 218               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 219               		.stabd	78,0,0
 220               		.section	.text.receiveByte,"ax",@progbits
 221               		.stabs	"receiveByte:F(0,11)",36,0,66,receiveByte
 222               	.global	receiveByte
 223               		.type	receiveByte, @function
 224               	receiveByte:
 225               		.stabd	46,0,0
  66:comp.c        **** unsigned char receiveByte(void) {
 226               		.stabn	68,0,66,.LM14-.LFBB4
 227               	.LM14:
 228               	.LFBB4:
 229               	/* prologue: function */
 230               	/* frame size = 0 */
  66:comp.c        **** unsigned char receiveByte(void) {
 231               		.stabn	68,0,66,.LM15-.LFBB4
 232               	.LM15:
 233 0000 28EC      		ldi r18,lo8(200)
 234 0002 30E0      		ldi r19,hi8(200)
 235               	.L13:
 236               	.LBB20:
 237               	.LBB21:
 238               		.stabn	68,0,80,.LM16-.LFBB4
 239               	.LM16:
 240 0004 8091 BC00 		lds r24,188
 241 0008 87FD      		sbrc r24,7
 242 000a 00C0      		rjmp .L12
 243 000c 2115      		cp r18,__zero_reg__
 244 000e 3105      		cpc r19,__zero_reg__
 245 0010 01F0      		breq .L12
 246 0012 2150      		subi r18,lo8(-(-1))
 247 0014 3040      		sbci r19,hi8(-(-1))
 248 0016 00C0      		rjmp .L13
 249               	.L12:
 250               	.LBE21:
 251               	.LBE20:
  68:comp.c        **** 	TWCR = ((TWCR&0x0F)|(1<<TWINT)|(1<<TWEA));
 252               		.stabn	68,0,68,.LM17-.LFBB4
GAS LISTING /tmp/ccRNnKHa.s 			page 7


 253               	.LM17:
 254 0018 8091 BC00 		lds r24,188
 255 001c 8F70      		andi r24,lo8(15)
 256 001e 806C      		ori r24,lo8(-64)
 257 0020 8093 BC00 		sts 188,r24
 258 0024 28EC      		ldi r18,lo8(200)
 259 0026 30E0      		ldi r19,hi8(200)
 260               	.L15:
 261               	.LBB22:
 262               	.LBB23:
 263               		.stabn	68,0,80,.LM18-.LFBB4
 264               	.LM18:
 265 0028 8091 BC00 		lds r24,188
 266 002c 87FD      		sbrc r24,7
 267 002e 00C0      		rjmp .L14
 268 0030 2115      		cp r18,__zero_reg__
 269 0032 3105      		cpc r19,__zero_reg__
 270 0034 01F0      		breq .L14
 271 0036 2150      		subi r18,lo8(-(-1))
 272 0038 3040      		sbci r19,hi8(-(-1))
 273 003a 00C0      		rjmp .L15
 274               	.L14:
 275               	.LBE23:
 276               	.LBE22:
  70:comp.c        **** 	return(TWDR);
 277               		.stabn	68,0,70,.LM19-.LFBB4
 278               	.LM19:
 279 003c 8091 BB00 		lds r24,187
 280               	/* epilogue start */
  71:comp.c        **** }
 281               		.stabn	68,0,71,.LM20-.LFBB4
 282               	.LM20:
 283 0040 0895      		ret
 284               		.size	receiveByte, .-receiveByte
 285               		.stabs	"timeout:r(0,1)",64,0,79,18
 286               		.stabn	192,0,0,.LBB21-.LFBB4
 287               		.stabn	224,0,0,.LBE21-.LFBB4
 288               		.stabs	"timeout:r(0,1)",64,0,79,18
 289               		.stabn	192,0,0,.LBB23-.LFBB4
 290               		.stabn	224,0,0,.LBE23-.LFBB4
 291               	.Lscope4:
 292               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 293               		.stabd	78,0,0
 294               		.section	.text.getValues,"ax",@progbits
 295               		.stabs	"getValues:F(0,15)",36,0,37,getValues
 296               		.stabs	"x:P(0,16)=*(0,1)",64,0,37,14
 297               		.stabs	"y:P(0,16)",64,0,37,12
 298               		.stabs	"z:P(0,16)",64,0,37,10
 299               	.global	getValues
 300               		.type	getValues, @function
 301               	getValues:
 302               		.stabd	46,0,0
  37:comp.c        **** void getValues(int *x, int *y, int *z) {
 303               		.stabn	68,0,37,.LM21-.LFBB5
 304               	.LM21:
 305               	.LFBB5:
 306 0000 AF92      		push r10
GAS LISTING /tmp/ccRNnKHa.s 			page 8


 307 0002 BF92      		push r11
 308 0004 CF92      		push r12
 309 0006 DF92      		push r13
 310 0008 EF92      		push r14
 311 000a FF92      		push r15
 312 000c 1F93      		push r17
 313               	/* prologue: function */
 314               	/* frame size = 0 */
 315 000e 7C01      		movw r14,r24
 316 0010 6B01      		movw r12,r22
 317 0012 5A01      		movw r10,r20
 318               	.LBB24:
 319               	.LBB25:
  52:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWSTA)|(1<<TWEN);
 320               		.stabn	68,0,52,.LM22-.LFBB5
 321               	.LM22:
 322 0014 84EA      		ldi r24,lo8(-92)
 323 0016 8093 BC00 		sts 188,r24
 324               	.LBE25:
 325               	.LBE24:
  40:comp.c        **** 	sendByte(0x3D);
 326               		.stabn	68,0,40,.LM23-.LFBB5
 327               	.LM23:
 328 001a 8DE3      		ldi r24,lo8(61)
 329 001c 0E94 0000 		call sendByte
  41:comp.c        **** 	xin = receiveByte();
 330               		.stabn	68,0,41,.LM24-.LFBB5
 331               	.LM24:
 332 0020 0E94 0000 		call receiveByte
 333 0024 182F      		mov r17,r24
  42:comp.c        **** 	*x = (xin<<8)|receiveByte();
 334               		.stabn	68,0,42,.LM25-.LFBB5
 335               	.LM25:
 336 0026 0E94 0000 		call receiveByte
 337 002a 312F      		mov r19,r17
 338 002c 20E0      		ldi r18,lo8(0)
 339 002e 90E0      		ldi r25,lo8(0)
 340 0030 282B      		or r18,r24
 341 0032 392B      		or r19,r25
 342 0034 F701      		movw r30,r14
 343 0036 3183      		std Z+1,r19
 344 0038 2083      		st Z,r18
  43:comp.c        **** 	yin = receiveByte();
 345               		.stabn	68,0,43,.LM26-.LFBB5
 346               	.LM26:
 347 003a 0E94 0000 		call receiveByte
 348 003e 182F      		mov r17,r24
  44:comp.c        **** 	*y = (yin<<8)|receiveByte();
 349               		.stabn	68,0,44,.LM27-.LFBB5
 350               	.LM27:
 351 0040 0E94 0000 		call receiveByte
 352 0044 312F      		mov r19,r17
 353 0046 20E0      		ldi r18,lo8(0)
 354 0048 90E0      		ldi r25,lo8(0)
 355 004a 282B      		or r18,r24
 356 004c 392B      		or r19,r25
 357 004e F601      		movw r30,r12
GAS LISTING /tmp/ccRNnKHa.s 			page 9


 358 0050 3183      		std Z+1,r19
 359 0052 2083      		st Z,r18
  45:comp.c        **** 	zin = receiveByte();
 360               		.stabn	68,0,45,.LM28-.LFBB5
 361               	.LM28:
 362 0054 0E94 0000 		call receiveByte
 363 0058 182F      		mov r17,r24
  46:comp.c        **** 	*z = (zin<<8)|receiveByte();
 364               		.stabn	68,0,46,.LM29-.LFBB5
 365               	.LM29:
 366 005a 0E94 0000 		call receiveByte
 367 005e 312F      		mov r19,r17
 368 0060 20E0      		ldi r18,lo8(0)
 369 0062 90E0      		ldi r25,lo8(0)
 370 0064 282B      		or r18,r24
 371 0066 392B      		or r19,r25
 372 0068 F501      		movw r30,r10
 373 006a 3183      		std Z+1,r19
 374 006c 2083      		st Z,r18
  47:comp.c        **** 	sendByte(0x3D);
 375               		.stabn	68,0,47,.LM30-.LFBB5
 376               	.LM30:
 377 006e 8DE3      		ldi r24,lo8(61)
 378 0070 0E94 0000 		call sendByte
  48:comp.c        **** 	sendStop();
 379               		.stabn	68,0,48,.LM31-.LFBB5
 380               	.LM31:
 381 0074 0E94 0000 		call sendStop
 382               	/* epilogue start */
  49:comp.c        **** }
 383               		.stabn	68,0,49,.LM32-.LFBB5
 384               	.LM32:
 385 0078 1F91      		pop r17
 386 007a FF90      		pop r15
 387 007c EF90      		pop r14
 388 007e DF90      		pop r13
 389 0080 CF90      		pop r12
 390 0082 BF90      		pop r11
 391 0084 AF90      		pop r10
 392 0086 0895      		ret
 393               		.size	getValues, .-getValues
 394               		.stabs	"xin:r(0,11)",64,0,38,17
 395               		.stabs	"yin:r(0,11)",64,0,38,17
 396               		.stabs	"zin:r(0,11)",64,0,38,17
 397               		.stabn	192,0,0,.LFBB5-.LFBB5
 398               		.stabn	224,0,0,.Lscope5-.LFBB5
 399               	.Lscope5:
 400               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 401               		.stabd	78,0,0
 402               		.section	.text.readStatus,"ax",@progbits
 403               		.stabs	"readStatus:F(0,11)",36,0,73,readStatus
 404               	.global	readStatus
 405               		.type	readStatus, @function
 406               	readStatus:
 407               		.stabd	46,0,0
  73:comp.c        **** unsigned char readStatus() {
 408               		.stabn	68,0,73,.LM33-.LFBB6
GAS LISTING /tmp/ccRNnKHa.s 			page 10


 409               	.LM33:
 410               	.LFBB6:
 411               	/* prologue: function */
 412               	/* frame size = 0 */
  73:comp.c        **** unsigned char readStatus() {
 413               		.stabn	68,0,73,.LM34-.LFBB6
 414               	.LM34:
 415 0000 28EC      		ldi r18,lo8(200)
 416 0002 30E0      		ldi r19,hi8(200)
 417               	.L21:
 418               	.LBB26:
 419               	.LBB27:
 420               		.stabn	68,0,80,.LM35-.LFBB6
 421               	.LM35:
 422 0004 8091 BC00 		lds r24,188
 423 0008 87FD      		sbrc r24,7
 424 000a 00C0      		rjmp .L20
 425 000c 2115      		cp r18,__zero_reg__
 426 000e 3105      		cpc r19,__zero_reg__
 427 0010 01F0      		breq .L20
 428 0012 2150      		subi r18,lo8(-(-1))
 429 0014 3040      		sbci r19,hi8(-(-1))
 430 0016 00C0      		rjmp .L21
 431               	.L20:
 432               	.LBE27:
 433               	.LBE26:
  75:comp.c        **** 	return(TWSR);
 434               		.stabn	68,0,75,.LM36-.LFBB6
 435               	.LM36:
 436 0018 8091 B900 		lds r24,185
 437               	/* epilogue start */
  76:comp.c        **** }
 438               		.stabn	68,0,76,.LM37-.LFBB6
 439               	.LM37:
 440 001c 0895      		ret
 441               		.size	readStatus, .-readStatus
 442               		.stabs	"timeout:r(0,1)",64,0,79,18
 443               		.stabn	192,0,0,.LBB27-.LFBB6
 444               		.stabn	224,0,0,.LBE27-.LFBB6
 445               	.Lscope6:
 446               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 447               		.stabd	78,0,0
 448               		.section	.text.waitForReady,"ax",@progbits
 449               		.stabs	"waitForReady:F(0,15)",36,0,78,waitForReady
 450               	.global	waitForReady
 451               		.type	waitForReady, @function
 452               	waitForReady:
 453               		.stabd	46,0,0
  78:comp.c        **** void waitForReady(void) {
 454               		.stabn	68,0,78,.LM38-.LFBB7
 455               	.LM38:
 456               	.LFBB7:
 457               	/* prologue: function */
 458               	/* frame size = 0 */
  78:comp.c        **** void waitForReady(void) {
 459               		.stabn	68,0,78,.LM39-.LFBB7
 460               	.LM39:
GAS LISTING /tmp/ccRNnKHa.s 			page 11


 461 0000 28EC      		ldi r18,lo8(200)
 462 0002 30E0      		ldi r19,hi8(200)
 463               	.L25:
 464               		.stabn	68,0,80,.LM40-.LFBB7
 465               	.LM40:
 466 0004 8091 BC00 		lds r24,188
 467 0008 87FD      		sbrc r24,7
 468 000a 00C0      		rjmp .L26
 469 000c 2115      		cp r18,__zero_reg__
 470 000e 3105      		cpc r19,__zero_reg__
 471 0010 01F0      		breq .L26
 472 0012 2150      		subi r18,lo8(-(-1))
 473 0014 3040      		sbci r19,hi8(-(-1))
 474 0016 00C0      		rjmp .L25
 475               	.L26:
 476 0018 0895      		ret
 477               		.size	waitForReady, .-waitForReady
 478               		.stabs	"timeout:r(0,1)",64,0,79,18
 479               		.stabn	192,0,0,.LFBB7-.LFBB7
 480               		.stabn	224,0,0,.Lscope7-.LFBB7
 481               	.Lscope7:
 482               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 483               		.stabd	78,0,0
 484               		.section	.text.in,"ax",@progbits
 485               		.stabs	"in:F(0,15)",36,0,23,in
 486               	.global	in
 487               		.type	in, @function
 488               	in:
 489               		.stabd	46,0,0
  23:comp.c        **** void in(void){
 490               		.stabn	68,0,23,.LM41-.LFBB8
 491               	.LM41:
 492               	.LFBB8:
 493               	/* prologue: function */
 494               	/* frame size = 0 */
  24:comp.c        **** 	PORTC = 0b00110000;
 495               		.stabn	68,0,24,.LM42-.LFBB8
 496               	.LM42:
 497 0000 80E3      		ldi r24,lo8(48)
 498 0002 88B9      		out 40-32,r24
  26:comp.c        **** 	TWSR &= ~((1<<TWPS1)&(1<<TWPS0));
 499               		.stabn	68,0,26,.LM43-.LFBB8
 500               	.LM43:
 501 0004 E9EB      		ldi r30,lo8(185)
 502 0006 F0E0      		ldi r31,hi8(185)
 503 0008 8081      		ld r24,Z
 504 000a 8083      		st Z,r24
  27:comp.c        **** 	TWBR = (unsigned char)(F_CPU/200000l-8);
 505               		.stabn	68,0,27,.LM44-.LFBB8
 506               	.LM44:
 507 000c 88E4      		ldi r24,lo8(72)
 508 000e 8093 B800 		sts 184,r24
 509               	.LBB28:
 510               	.LBB29:
  52:comp.c        **** 	TWCR = (1<<TWINT)|(1<<TWSTA)|(1<<TWEN);
 511               		.stabn	68,0,52,.LM45-.LFBB8
 512               	.LM45:
GAS LISTING /tmp/ccRNnKHa.s 			page 12


 513 0012 84EA      		ldi r24,lo8(-92)
 514 0014 8093 BC00 		sts 188,r24
 515               	.LBE29:
 516               	.LBE28:
  30:comp.c        **** 	sendByte(0x3C);
 517               		.stabn	68,0,30,.LM46-.LFBB8
 518               	.LM46:
 519 0018 8CE3      		ldi r24,lo8(60)
 520 001a 0E94 0000 		call sendByte
  31:comp.c        **** 	sendByte(0x02);
 521               		.stabn	68,0,31,.LM47-.LFBB8
 522               	.LM47:
 523 001e 82E0      		ldi r24,lo8(2)
 524 0020 0E94 0000 		call sendByte
  32:comp.c        **** 	sendByte(0x00);
 525               		.stabn	68,0,32,.LM48-.LFBB8
 526               	.LM48:
 527 0024 80E0      		ldi r24,lo8(0)
 528 0026 0E94 0000 		call sendByte
  33:comp.c        **** 	sendStop();
 529               		.stabn	68,0,33,.LM49-.LFBB8
 530               	.LM49:
 531 002a 0E94 0000 		call sendStop
  34:comp.c        **** 	delay(100);
 532               		.stabn	68,0,34,.LM50-.LFBB8
 533               	.LM50:
 534 002e 64E6      		ldi r22,lo8(100)
 535 0030 70E0      		ldi r23,hi8(100)
 536 0032 80E0      		ldi r24,hlo8(100)
 537 0034 90E0      		ldi r25,hhi8(100)
 538 0036 0E94 0000 		call delay
 539               	/* epilogue start */
  35:comp.c        **** }
 540               		.stabn	68,0,35,.LM51-.LFBB8
 541               	.LM51:
 542 003a 0895      		ret
 543               		.size	in, .-in
 544               	.Lscope8:
 545               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 546               		.stabd	78,0,0
 547               		.data
 548               	.LC0:
 549 0000 583D 2025 		.string	"X= %d\tY= %d\tZ= %d\n"
 549      6409 593D 
 549      2025 6409 
 549      5A3D 2025 
 549      640A 00
 550               		.section	.text.main,"ax",@progbits
 551               		.stabs	"main:F(0,1)",36,0,10,main
 552               	.global	main
 553               		.type	main, @function
 554               	main:
 555               		.stabd	46,0,0
  10:comp.c        **** int main(void){
 556               		.stabn	68,0,10,.LM52-.LFBB9
 557               	.LM52:
 558               	.LFBB9:
GAS LISTING /tmp/ccRNnKHa.s 			page 13


 559 0000 AF92      		push r10
 560 0002 BF92      		push r11
 561 0004 CF92      		push r12
 562 0006 DF92      		push r13
 563 0008 EF92      		push r14
 564 000a FF92      		push r15
 565 000c 0F93      		push r16
 566 000e 1F93      		push r17
 567 0010 DF93      		push r29
 568 0012 CF93      		push r28
 569 0014 00D0      		rcall .
 570 0016 00D0      		rcall .
 571 0018 00D0      		rcall .
 572 001a CDB7      		in r28,__SP_L__
 573 001c DEB7      		in r29,__SP_H__
 574               	/* prologue: function */
 575               	/* frame size = 6 */
  11:comp.c        **** 	init();
 576               		.stabn	68,0,11,.LM53-.LFBB9
 577               	.LM53:
 578 001e 0E94 0000 		call init
  12:comp.c        **** 	in();
 579               		.stabn	68,0,12,.LM54-.LFBB9
 580               	.LM54:
 581 0022 0E94 0000 		call in
  13:comp.c        **** 	sei();
 582               		.stabn	68,0,13,.LM55-.LFBB9
 583               	.LM55:
 584               	/* #APP */
 585               	 ;  13 "comp.c" 1
 586 0026 7894      		sei
 587               	 ;  0 "" 2
 588               	/* #NOAPP */
 589               	.LBB30:
  16:comp.c        **** 		getValues(&x,&y,&z);	
 590               		.stabn	68,0,16,.LM56-.LFBB9
 591               	.LM56:
 592 0028 93E0      		ldi r25,lo8(3)
 593 002a A92E      		mov r10,r25
 594 002c B12C      		mov r11,__zero_reg__
 595 002e AC0E      		add r10,r28
 596 0030 BD1E      		adc r11,r29
 597 0032 85E0      		ldi r24,lo8(5)
 598 0034 C82E      		mov r12,r24
 599 0036 D12C      		mov r13,__zero_reg__
 600 0038 CC0E      		add r12,r28
 601 003a DD1E      		adc r13,r29
 602 003c 7E01      		movw r14,r28
 603 003e 0894      		sec
 604 0040 E11C      		adc r14,__zero_reg__
 605 0042 F11C      		adc r15,__zero_reg__
  17:comp.c        **** 		printf("X= %d\tY= %d\tZ= %d\n", x, y, z);
 606               		.stabn	68,0,17,.LM57-.LFBB9
 607               	.LM57:
 608 0044 00E0      		ldi r16,lo8(.LC0)
 609 0046 10E0      		ldi r17,hi8(.LC0)
 610               	.L30:
GAS LISTING /tmp/ccRNnKHa.s 			page 14


  16:comp.c        **** 		getValues(&x,&y,&z);	
 611               		.stabn	68,0,16,.LM58-.LFBB9
 612               	.LM58:
 613 0048 C701      		movw r24,r14
 614 004a B501      		movw r22,r10
 615 004c A601      		movw r20,r12
 616 004e 0E94 0000 		call getValues
  17:comp.c        **** 		printf("X= %d\tY= %d\tZ= %d\n", x, y, z);
 617               		.stabn	68,0,17,.LM59-.LFBB9
 618               	.LM59:
 619 0052 8DB7      		in r24,__SP_L__
 620 0054 9EB7      		in r25,__SP_H__
 621 0056 0897      		sbiw r24,8
 622 0058 0FB6      		in __tmp_reg__,__SREG__
 623 005a F894      		cli
 624 005c 9EBF      		out __SP_H__,r25
 625 005e 0FBE      		out __SREG__,__tmp_reg__
 626 0060 8DBF      		out __SP_L__,r24
 627 0062 EDB7      		in r30,__SP_L__
 628 0064 FEB7      		in r31,__SP_H__
 629 0066 3196      		adiw r30,1
 630 0068 ADB7      		in r26,__SP_L__
 631 006a BEB7      		in r27,__SP_H__
 632 006c 1296      		adiw r26,1+1
 633 006e 1C93      		st X,r17
 634 0070 0E93      		st -X,r16
 635 0072 1197      		sbiw r26,1
 636 0074 8981      		ldd r24,Y+1
 637 0076 9A81      		ldd r25,Y+2
 638 0078 9383      		std Z+3,r25
 639 007a 8283      		std Z+2,r24
 640 007c 8B81      		ldd r24,Y+3
 641 007e 9C81      		ldd r25,Y+4
 642 0080 9583      		std Z+5,r25
 643 0082 8483      		std Z+4,r24
 644 0084 8D81      		ldd r24,Y+5
 645 0086 9E81      		ldd r25,Y+6
 646 0088 9783      		std Z+7,r25
 647 008a 8683      		std Z+6,r24
 648 008c 0E94 0000 		call printf
  18:comp.c        **** 		delay(1000);
 649               		.stabn	68,0,18,.LM60-.LFBB9
 650               	.LM60:
 651 0090 8DB7      		in r24,__SP_L__
 652 0092 9EB7      		in r25,__SP_H__
 653 0094 0896      		adiw r24,8
 654 0096 0FB6      		in __tmp_reg__,__SREG__
 655 0098 F894      		cli
 656 009a 9EBF      		out __SP_H__,r25
 657 009c 0FBE      		out __SREG__,__tmp_reg__
 658 009e 8DBF      		out __SP_L__,r24
 659 00a0 68EE      		ldi r22,lo8(1000)
 660 00a2 73E0      		ldi r23,hi8(1000)
 661 00a4 80E0      		ldi r24,hlo8(1000)
 662 00a6 90E0      		ldi r25,hhi8(1000)
 663 00a8 0E94 0000 		call delay
 664 00ac 00C0      		rjmp .L30
GAS LISTING /tmp/ccRNnKHa.s 			page 15


 665               	.LBE30:
 666               		.size	main, .-main
 667               		.stabs	"x:(0,1)",128,0,15,1
 668               		.stabs	"y:(0,1)",128,0,15,3
 669               		.stabs	"z:(0,1)",128,0,15,5
 670               		.stabn	192,0,0,.LBB30-.LFBB9
 671               		.stabn	224,0,0,.LBE30-.LFBB9
 672               	.Lscope9:
 673               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 674               		.stabd	78,0,0
 675               		.text
 676               		.stabs	"",100,0,0,.Letext0
 677               	.Letext0:
 678               	.global __do_copy_data
GAS LISTING /tmp/ccRNnKHa.s 			page 16


DEFINED SYMBOLS
                            *ABS*:00000000 comp.c
     /tmp/ccRNnKHa.s:2      *ABS*:0000003f __SREG__
     /tmp/ccRNnKHa.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccRNnKHa.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccRNnKHa.s:5      *ABS*:00000034 __CCP__
     /tmp/ccRNnKHa.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccRNnKHa.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccRNnKHa.s:102    .text.sendStart:00000000 sendStart
     /tmp/ccRNnKHa.s:125    .text.sendStop:00000000 sendStop
     /tmp/ccRNnKHa.s:173    .text.sendByte:00000000 sendByte
     /tmp/ccRNnKHa.s:224    .text.receiveByte:00000000 receiveByte
     /tmp/ccRNnKHa.s:301    .text.getValues:00000000 getValues
     /tmp/ccRNnKHa.s:406    .text.readStatus:00000000 readStatus
     /tmp/ccRNnKHa.s:452    .text.waitForReady:00000000 waitForReady
     /tmp/ccRNnKHa.s:488    .text.in:00000000 in
     /tmp/ccRNnKHa.s:554    .text.main:00000000 main

UNDEFINED SYMBOLS
delay
init
printf
__do_copy_data
